<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />

    <script src="dist/clipboard.min.js"></script>
    <title>Easypoll Bootstrap</title>

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }
        
        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>
    <!-- Custom styles for this template -->
    <link href="https://getbootstrap.com/docs/5.0/examples/sticky-footer/sticky-footer.css" rel="stylesheet" />
</head>

<body class="d-flex flex-column h-100">
    <main class="flex-shrink-0">
        <div class="container">
            <h1>Fill your options</h1>

            <form autocomplete="off" class="row g-3" id="easyform">
                <label for="exampleFormControlTextarea1" class="form-label">Question</label
          >
          <textarea
            class="form-control col-9"
            placeholder="Poll question"
            rows="3"
            id="question"
            maxlength="100"
            style="height: 80px; width: 18em"
          ></textarea><label style="color: red" class="form-label col-1" id="qtcounter"></label>
                <div class="d-grid d-lg-block col-1 btn-group-vertical" role="group" aria-label="...">
                    <button type="button" class="btn btn-secondary btn-sm" onclick="addElement()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
                        <path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"></path>
                      </svg></button>
                    <input type="text" class="btn btn-outline-secondary btn-sm" id="qtChoices" value="2"></input>
                    <button type="button" class="btn btn-secondary btn-sm" onclick="removeElement()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dash-lg" viewBox="0 0 16 16">
                        <path d="M0 8a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1z"/>
                      </svg></button></div>

                <label>Option 1:</label><br />
                <input class="col-6" placeholder="Enter an option" name="name" id="opt1" maxlength="30" /><label style="color: red" class="form-label col-1" id="counter1"></label>
                <br />
                <label>Option 2:</label><br />
                <input class="col-6" placeholder="Enter another option" name="name" id="opt2" maxlength="30" /><label style="color: red" class="form-label col-1" id="counter2"></label>
                <br />
                <div class="col-6" id="newElementId"></div>
                <br/>

                <class class="grid d-md-block">
                    <input class="btn btn-secondary" type="button" onclick="resetForm()" value="Reset form" /></class>
                <div class="col-8" style="background-color: #f8f9fa">
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end"> <button class="btn" id="btn-clipboard" data-clipboard-target="#values">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
                                <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                                <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                              </svg> </div>
                        <p id="values"></p>
                    
                        </button></div>



                    <div>
                        <p></p>
                    </div>
                    <div id="dynamicCheck">
                        <input type="button" value="Create Element" onclick="createNewElement();" />
                    </div>

            </form>
            </div>
    </main>

    <footer class="footer mt-auto py-3 bg-light">
        <div class="container">
            <a class="navbar-brand" href="https://slack.com/apps/ACTH3LKCP-easy-poll?tab=more_info" aria-label="PÃ¡gina inicial do Slack" target="_blank" rel="noopener noreferrer" title="Slack Easy Poll page">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-slack" viewBox="0 0 16 16">
            <path
              d="M3.362 10.11c0 .926-.756 1.681-1.681 1.681S0 11.036 0 10.111C0 9.186.756 8.43 1.68 8.43h1.682v1.68zm.846 0c0-.924.756-1.68 1.681-1.68s1.681.756 1.681 1.68v4.21c0 .924-.756 1.68-1.68 1.68a1.685 1.685 0 0 1-1.682-1.68v-4.21zM5.89 3.362c-.926 0-1.682-.756-1.682-1.681S4.964 0 5.89 0s1.68.756 1.68 1.68v1.682H5.89zm0 .846c.924 0 1.68.756 1.68 1.681S6.814 7.57 5.89 7.57H1.68C.757 7.57 0 6.814 0 5.89c0-.926.756-1.682 1.68-1.682h4.21zm6.749 1.682c0-.926.755-1.682 1.68-1.682.925 0 1.681.756 1.681 1.681s-.756 1.681-1.68 1.681h-1.681V5.89zm-.848 0c0 .924-.755 1.68-1.68 1.68A1.685 1.685 0 0 1 8.43 5.89V1.68C8.43.757 9.186 0 10.11 0c.926 0 1.681.756 1.681 1.68v4.21zm-1.681 6.748c.926 0 1.682.756 1.682 1.681S11.036 16 10.11 16s-1.681-.756-1.681-1.68v-1.682h1.68zm0-.847c-.924 0-1.68-.755-1.68-1.68 0-.925.756-1.681 1.68-1.681h4.21c.924 0 1.68.756 1.68 1.68 0 .926-.756 1.681-1.68 1.681h-4.21z"
            />
          </svg>
            </a>
            <span class="text-muted"> </span>
            <a class="navbar-brand" href="https://www.kalkoken.org/apps/easypoll/web/?page=manual" aria-label="Oficial Website" target="_blank" rel="noopener noreferrer" title="Oficial Manual Website">
                <!-- Always refer to src path without first "/" -->

                <img src="assets/icons/poll-logo.png" alt="easypoll logo" width="16" height="16" fill="currentColor" class="bi bi-slack" viewBox="0 0 16 16" />
            </a>
            <span class="text-muted"> </span>
            <a class="navbar-brand" href="https://github.com/duarch/easypoll " aria-label="Oficial repo " target="_blank " rel="noopener noreferrer " title="Visit this repo ">
                <svg xmlns="http://www.w3.org/2000/svg " width="16 " height="16 " fill="currentColor " class="bi bi-github" viewBox="0 0 16 16 ">
            <path
              d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95
                    0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01
                    1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z "
            />
          </svg>
            </a>
            <span class="text-muted"> </span>
        </div>
    </footer>
    <script>
        // TODO 
        //  - inactive empty fields
        //  - add more items (until 7)
        //  - copy to clipboard function





        const question = document.getElementById("question");
        const opt1 = document.getElementById("opt1");
        const opt2 = document.getElementById("opt2");

        const log = document.getElementById("values");

        const qtcounter = document.getElementById("qtcounter");
        const counter1 = document.getElementById("counter1");
        const counter2 = document.getElementById("counter2");

        question.addEventListener("input", updateValue);
        opt1.addEventListener("input", updateValue);
        opt2.addEventListener("input", updateValue);


        function updateValue() {
            var txtQuest = ""
            var txtOpt1 = ""
            var txtOpt2 = ""
            var qt = question.value.length;
            var ct1 = opt1.value.length;
            var ct2 = opt2.value.length;

            if (qt != 0) {
                var quest1 = -100 + qt;
                qtcounter.textContent = `${quest1}`;
                txtQuest = `"${question.value}"`
            } else {
                qtcounter.textContent = "";
            }
            if (ct1 != 0) {
                var chars1 = -30 + ct1;
                counter1.textContent = `${chars1}`;
                txtOpt1 = `"${opt1.value}"`
            } else {
                counter1.textContent = "";
            }
            if (ct2 != 0) {
                var chars2 = -30 + ct2;
                counter2.textContent = `${chars2}`;
                txtOpt2 = `"${opt2.value}"`
            } else {
                counter2.textContent = "";
            }

            log.textContent = `/easypoll ${txtQuest} ${txtOpt1} ${txtOpt2}`;
        }




        function resetForm() {
            document.getElementById("easyform").reset();
            counter1.textContent = "";
            counter2.textContent = "";
            qtcounter.textContent = "";
            log.textContent = "";
        }

        function createNewElement() {
            // First create a DIV element.
            var txtNewInputBox = document.createElement("div");
            txtNewInputBox.setAttribute("id", "newdiv")

            // Then add the content (a new input box) of the element.
            txtNewInputBox.innerHTML =
                `<label>Option${choices.value}:</label><br /> <input class="col-6" placeholder="Enter another option" name="name" id="opt${choices.value}" maxlength="30" /><label style="color: red" class="form-label col-1" id="counter${choices.value}"></label><br />`
                // Finally put it where it is supposed to appear.
            document.getElementById("newElementId").appendChild(txtNewInputBox);
        }

        function deleteNewElement() {
            //var last = choices.value
            var select = document.getElementById("newdiv")

            select.removeChild(select.lastChild)

            // I stop here 
            // I need to remove the entire element not only parts of it








            // var select1 = document.getElementById(`"Option${choices.value}"`)
            // var select2 = document.getElementById(`"counter${choices.value}"`)
            // var select3 = document.getElementById(`"opt${choices.value}"`)
            // select1.remove()
            // select2.remove()
            // select3.remove()

        }




        var btn = document.getElementById('btn-clipboard');
        var clipboard = new ClipboardJS(btn);

        clipboard.on('success', function(e) {
            console.log(e);
        });

        clipboard.on('error', function(e) {
            console.log(e);
        });

        const choices = document.getElementById("qtChoices")

        function addElement() {
            let qtc = choices.value
            if (qtc <= 6) {
                qtc++
                choices.value = qtc
                createNewElement()
                console.log(qtc, choices.value)
            } else {
                return
            }
        }

        function removeElement() {
            let qtc = choices.value
            if (qtc >= 3) {
                qtc--
                choices.value = qtc
                deleteNewElement()
                console.log(qtc, choices.value)
            } else {
                return
            }
        }
    </script>


</body>

</html>